package acceptance

import (
	"context"
	"github.com/ethereum/go-ethereum/accounts/abi/bind"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/core/types"
	orbsClient "github.com/orbs-network/orbs-client-sdk-go/orbs"
	"github.com/orbs-network/orbs-network-go/crypto/keys"
	"github.com/orbs-network/orbs-network-go/services/crosschainconnector/ethereum/adapter"
	"github.com/orbs-network/orbs-network-go/services/processor/native/repository/ASBEthereum"
	"github.com/orbs-network/orbs-network-go/services/processor/native/repository/ERC20Proxy"
	"github.com/orbs-network/orbs-network-go/test"
	"github.com/orbs-network/orbs-network-go/test/builders"
	testKeys "github.com/orbs-network/orbs-network-go/test/crypto/keys"
	"github.com/orbs-network/orbs-spec/types/go/primitives"
	"github.com/orbs-network/orbs-spec/types/go/protocol"
	"github.com/stretchr/testify/require"
	"math/big"
	"strings"
	"testing"
)

// LH: Can only use after enabling Jonathan's (also Noam) feature for finding a block on Eth based on timestamp (find Taiga)
func TestTransferFromEthereumToOrbs(t *testing.T) {
	t.Skip()
	newHarness(t).
		Start(func(ctx context.Context, network NetworkHarness) {
			d := newAutonomousSwapDriver(network)

			etherAmountBefore := big.NewInt(20)
			amountToTransfer := big.NewInt(17)

			d.generateOrbsAccount(t)

			d.deployTokenContractToEthereum(t)
			d.generateEthereumAccountAndAssignFunds(t, etherAmountBefore)

			d.deployCryptoUtilsToEthereum(t)
			d.deployAutonomousSwapBridgeVerifierToEthereum(t)

			d.deployAutonomousSwapBridgeToEthereum(t)
			d.bindOrbsAutonomousSwapBridgeToEthereum(ctx, t)

			d.approveTransferInEthereumTokenContract(t, amountToTransfer)
			transferOutTxHash := d.transferOutFromEthereum(t, amountToTransfer)
			t.Log("Eth tx hash", transferOutTxHash)

			// TODO v1 deploy causes who is owner - important for both.
			d.transferInToOrbs(ctx, t, transferOutTxHash)

			balanceAfterTransfer := d.getBalanceInOrbs(ctx, t)
			require.EqualValues(t, amountToTransfer.Uint64(), balanceAfterTransfer, "wrong amount of tokens in orbs")

			etherBalanceAfterTransfer := d.getBalanceInEthereum(t)
			require.EqualValues(t, etherAmountBefore.Sub(etherAmountBefore, amountToTransfer).Uint64(), etherBalanceAfterTransfer, "wrong amount of tokens left in ethereum")

		})
}

func TestTransferFromOrbsToEthereum(t *testing.T) {
	t.Skip()
	newHarness(t).
		Start(func(ctx context.Context, network NetworkHarness) {
			d := newAutonomousSwapDriver(network)

			etherAmount := big.NewInt(3)
			amount := big.NewInt(17)

			d.generateOrbsAccount(t)
			d.generateOrbsFunds(ctx, t, amount)

			d.deployTokenContractToEthereum(t)
			d.generateEthereumAccountAndAssignFunds(t, etherAmount)

			d.deployCryptoUtilsToEthereum(t)
			d.deployAutonomousSwapBridgeVerifierToEthereum(t)

			d.deployAutonomousSwapBridgeToEthereum(t)
			d.bindOrbsAutonomousSwapBridgeToEthereum(ctx, t)

			// TODO v1 deploy causes who is owner - important for both.
			d.transferOutFromOrbs(ctx, t, amount)

			//d.transferInToEthereum(ctx, t)

			//balanceAfterTransfer := d.getBalanceInEthereum(t)
			//require.EqualValues(t, etherAmount.Add(etherAmount, amount).Uint64(), balanceAfterTransfer, "wrong amount")

			orbsBalanceAfterTransfer := d.getBalanceInOrbs(ctx, t)
			require.EqualValues(t, 0, orbsBalanceAfterTransfer, "wrong amount")
		})
}

func newAutonomousSwapDriver(networkDriver NetworkHarness) *driver {
	simulator := networkDriver.EthereumSimulator()
	return &driver{
		network:                  networkDriver,
		simulator:                simulator,
		addressInEthereum:        simulator.GetAuth(),
		orbsASBContractName:      asb_ether.CONTRACT_NAME,
		orbsContractOwnerAddress: testKeys.Ed25519KeyPairForTests(5),
	}
}

type driver struct {
	network   NetworkHarness
	simulator *adapter.EthereumSimulator

	orbsContractOwnerAddress *keys.Ed25519KeyPair
	orbsASBContractName      string
	orbsUserAddress          [20]byte
	orbsUserKeyPair          *keys.Ed25519KeyPair

	addressInEthereum *bind.TransactOpts // we use a single address for both the "admin" stuff like deploying the contracts and as our swapping user, so as to simplify setup - otherwise we'll need to create two PKs in the simulator

	erc20contract         *bind.BoundContract
	erc20address          *common.Address
	ethASBAddress         *common.Address
	ethASBContract        *bind.BoundContract
	ethCryptoUtilsAddress *common.Address
	ethASBVerifyAddress   *common.Address
}

// orbs side funcs
func (d *driver) generateOrbsAccount(t *testing.T) {
	orbsUser, err := orbsClient.CreateAccount()
	require.NoError(t, err, "could not create orbs address")

	copy(d.orbsUserAddress[:], orbsUser.AddressAsBytes())
	d.orbsUserKeyPair = keys.NewEd25519KeyPair(orbsUser.PublicKey, orbsUser.PrivateKey)
}

func (d *driver) generateOrbsFunds(ctx context.Context, t *testing.T, amount *big.Int) {
	response, txHash := d.network.SendTransaction(ctx, builders.Transaction().
		WithMethod(primitives.ContractName(erc20proxy.CONTRACT_NAME), "mint").
		WithEd25519Signer(d.orbsContractOwnerAddress).
		WithArgs(d.orbsUserAddress[:], amount.Uint64()).
		Builder(), 0)
	d.network.WaitForTransactionInState(ctx, txHash)
	test.RequireSuccess(t, response, "failed setting minting tokens at orbs")
}

func (d *driver) getBalanceInOrbs(ctx context.Context, t *testing.T) uint64 {
	balanceResponse := d.network.RunQuery(ctx, builders.Query().
		WithEd25519Signer(d.orbsContractOwnerAddress).
		WithMethod(primitives.ContractName(erc20proxy.CONTRACT_NAME), "balanceOf").
		WithArgs(d.orbsUserAddress[:]).
		Builder(), 0)
	require.EqualValues(t, protocol.EXECUTION_RESULT_SUCCESS, balanceResponse.QueryResult().ExecutionResult())
	// check that the tokens got there.
	argsArray := builders.PackedArgumentArrayDecode(balanceResponse.QueryResult().RawOutputArgumentArrayWithHeader())
	value := argsArray.ArgumentsIterator().NextArguments().Uint64Value()
	return value
}

func (d *driver) approveTransferInOrbsTokenContract(ctx context.Context, t *testing.T, amount *big.Int) {
	response, txHash := d.network.SendTransaction(ctx, builders.Transaction().
		WithEd25519Signer(d.orbsUserKeyPair).
		WithMethod(primitives.ContractName(erc20proxy.CONTRACT_NAME), "approve").
		WithArgs(d.addressInEthereum.From, amount.Uint64()).
		Builder(), 0)
	d.network.WaitForTransactionInState(ctx, txHash)
	test.RequireSuccess(t, response, "failed approve transfer in orbs")
}

func (d *driver) bindOrbsAutonomousSwapBridgeToEthereum(ctx context.Context, t *testing.T) {
	response, txHash := d.network.SendTransaction(ctx, builders.Transaction().
		WithMethod(primitives.ContractName(d.orbsASBContractName), "setAsbAddr").
		WithEd25519Signer(d.orbsContractOwnerAddress).
		WithArgs(d.ethASBAddress.Hex()).
		Builder(), 0)
	d.network.WaitForTransactionInState(ctx, txHash)
	test.RequireSuccess(t, response, "failed setting asb address")
}

func (d *driver) transferInToOrbs(ctx context.Context, t *testing.T, transferOutTxHash string) {
	response, txHash := d.network.SendTransaction(ctx, builders.Transaction().
		WithMethod(primitives.ContractName(d.orbsASBContractName), "transferIn").
		WithEd25519Signer(d.orbsContractOwnerAddress).
		WithArgs(transferOutTxHash).
		Builder(), 0)
	d.network.WaitForTransactionInState(ctx, txHash)
	test.RequireSuccess(t, response, "failed transferIn in orbs")
}

func (d *driver) transferOutFromOrbs(ctx context.Context, t *testing.T, amount *big.Int) {
	response, txHash := d.network.SendTransaction(ctx, builders.Transaction().
		WithMethod(primitives.ContractName(d.orbsASBContractName), "transferOut").
		WithEd25519Signer(d.orbsUserKeyPair).
		WithArgs(d.addressInEthereum.From.Bytes(), amount.Uint64()).
		Builder(), 0)
	d.network.WaitForTransactionInState(ctx, txHash)

	t.Log(response.StringTransactionReceipt())
	t.Log(builders.PackedArgumentArrayDecode(response.TransactionReceipt().RawOutputArgumentArrayWithHeader()))
	test.RequireSuccess(t, response, "failed transfer out in orbs")
}

// Ethereum related funcs
func (d *driver) deployAutonomousSwapBridgeToEthereum(t *testing.T) {
	fakeFederation := common.BigToAddress(big.NewInt(1700))

	ethAsbAddress, ethAsbContract, err := d.simulator.DeployEthereumContract(d.addressInEthereum, asbABI, asbByteCode, uint32(0), uint64(builders.DEFAULT_TEST_VIRTUAL_CHAIN_ID), //TODO CHANGE IN LEoNId,
		d.orbsASBContractName, d.erc20address, fakeFederation, d.ethASBVerifyAddress)
	require.NoError(t, err, "could not deploy asb to Ethereum")
	d.simulator.Commit()
	d.ethASBAddress = ethAsbAddress
	d.ethASBContract = ethAsbContract
}

func (d *driver) deployAutonomousSwapBridgeVerifierToEthereum(t *testing.T) {
	fakeFederation := common.BigToAddress(big.NewInt(1700))

	// note, the replace string may change if we upgrade solidity version, double check it on every bytecode update
	realVerifierByteCode := strings.Replace(asbIncompleteVerifyByteCode, "__CryptoUtils___________________________", d.ethCryptoUtilsAddress.String()[2:], -1)

	ethAsbVerifyAddress, _, err := d.simulator.DeployEthereumContract(d.addressInEthereum, asbVerifyConstructorABI, realVerifierByteCode, fakeFederation)

	require.NoError(t, err, "could not deploy asb to Ethereum")
	d.simulator.Commit()
	d.ethASBVerifyAddress = ethAsbVerifyAddress
}

func (d *driver) deployCryptoUtilsToEthereum(t *testing.T) {
	ethAsbAddress, _, err := d.simulator.DeployEthereumContract(d.addressInEthereum, asbCryptoABI, asbCryptoByteCode)
	require.NoError(t, err, "could not deploy asb to Ethereum")
	d.simulator.Commit()
	d.ethCryptoUtilsAddress = ethAsbAddress
}

func (d *driver) deployTokenContractToEthereum(t *testing.T) {
	ethTetAddress, ethTetContract, err := d.simulator.DeployEthereumContract(d.addressInEthereum, tetABI, tetByteCode)
	require.NoError(t, err, "could not deploy erc token to Ethereum")
	d.simulator.Commit()
	d.erc20contract = ethTetContract
	d.erc20address = ethTetAddress
}

func (d *driver) generateEthereumAccountAndAssignFunds(t *testing.T, amount *big.Int) {
	ethContractUserAuth := d.addressInEthereum
	// we don't REALLY care who is the user we transfer from, so for simplicity's sake we use the same mega-user defined when simulator is created
	_, err := d.erc20contract.Transact(d.addressInEthereum, "assign", ethContractUserAuth.From /*address of user*/, amount)
	// generate token in source address
	require.NoError(t, err, "could not assign token to sender")
	d.simulator.Commit()
}

func (d *driver) getBalanceInEthereum(t *testing.T) uint64 {
	ethContractUserAuth := d.addressInEthereum
	// we don't REALLY care who is the user we transfer from, so for simplicity's sake we use the same mega-user defined when simulator is created
	var (
		ret0 = new(*big.Int)
	)
	result := ret0
	err := d.erc20contract.Call(nil, result, "balanceOf", ethContractUserAuth.From /*address of user*/)
	// generate token in source address
	require.NoError(t, err, "could not get token balance of user")
	d.simulator.Commit()
	return (*result).Uint64()
}

func (d *driver) approveTransferInEthereumTokenContract(t *testing.T, amount *big.Int) {
	tx, err := d.erc20contract.Transact(d.addressInEthereum, "approve", d.ethASBAddress, amount)
	require.NoError(t, err, "could not approve transfer")
	d.simulator.Commit()
	receipt, err := d.simulator.Receipt(tx.Hash())
	require.NoError(t, err, "could not get receipt")
	require.EqualValues(t, types.ReceiptStatusSuccessful, receipt.Status, "call to approve on tet in Ethereum failed")

}

func (d *driver) transferOutFromEthereum(t *testing.T, amount *big.Int) string {
	transferOutTx, err := d.ethASBContract.Transact(d.addressInEthereum, "transferOut", d.orbsUserAddress, amount)
	d.simulator.Commit()
	require.NoError(t, err, "could not transfer out")

	receipt, err := d.simulator.Receipt(transferOutTx.Hash())
	require.NoError(t, err, "could not get receipt")
	require.EqualValues(t, types.ReceiptStatusSuccessful, receipt.Status, "call to transferOut on ASB in Ethereum failed")

	return transferOutTx.Hash().Hex()
}

const tetABI = `[{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"constant":false,"inputs":[{"name":"_account","type":"address"},{"name":"_value","type":"uint256"}],"name":"assign","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]`
const tetByteCode = "0x608060405234801561001057600080fd5b506111aa806100206000396000f300608060405260043610610099576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063095ea7b31461009e57806318160ddd1461010357806323b872dd1461012e57806339509351146101b357806370a0823114610218578063a457c2d71461026f578063a9059cbb146102d4578063be76048814610339578063dd62ed3e14610386575b600080fd5b3480156100aa57600080fd5b506100e9600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506103fd565b604051808215151515815260200191505060405180910390f35b34801561010f57600080fd5b5061011861052a565b6040518082815260200191505060405180910390f35b34801561013a57600080fd5b50610199600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610534565b604051808215151515815260200191505060405180910390f35b3480156101bf57600080fd5b506101fe600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506106e6565b604051808215151515815260200191505060405180910390f35b34801561022457600080fd5b50610259600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061091d565b6040518082815260200191505060405180910390f35b34801561027b57600080fd5b506102ba600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610965565b604051808215151515815260200191505060405180910390f35b3480156102e057600080fd5b5061031f600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610b9c565b604051808215151515815260200191505060405180910390f35b34801561034557600080fd5b50610384600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610bb3565b005b34801561039257600080fd5b506103e7600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610bd3565b6040518082815260200191505060405180910390f35b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561043a57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b6000600254905090565b6000600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482111515156105c157600080fd5b61065082600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610c5a90919063ffffffff16565b600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506106db848484610c7b565b600190509392505050565b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415151561072357600080fd5b6107b282600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e9490919063ffffffff16565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518082815260200191505060405180910390a36001905092915050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141515156109a257600080fd5b610a3182600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610c5a90919063ffffffff16565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518082815260200191505060405180910390a36001905092915050565b6000610ba9338484610c7b565b6001905092915050565b610bc582610bc08461091d565b610eb5565b610bcf8282611040565b5050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600080838311151515610c6c57600080fd5b82840390508091505092915050565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548111151515610cc857600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515610d0457600080fd5b610d55816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610c5a90919063ffffffff16565b6000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610de8816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e9490919063ffffffff16565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a3505050565b6000808284019050838110151515610eab57600080fd5b8091505092915050565b60008273ffffffffffffffffffffffffffffffffffffffff1614151515610edb57600080fd5b6000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548111151515610f2857600080fd5b610f3d81600254610c5a90919063ffffffff16565b600281905550610f94816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610c5a90919063ffffffff16565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b60008273ffffffffffffffffffffffffffffffffffffffff161415151561106657600080fd5b61107b81600254610e9490919063ffffffff16565b6002819055506110d2816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e9490919063ffffffff16565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a350505600a165627a7a7230582094609698b7c76dff80d05dcaa6cb6f31fb8f800a5026ee62cf6e4f71bba041a40029"

const asbABI = `[{"constant":true,"inputs":[],"name":"verifier","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"maxOrbsTuid","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"orbsASBContractName","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"federation","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"spentOrbsTuids","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"virtualChainId","outputs":[{"name":"","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tuidCounter","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"networkType","outputs":[{"name":"","type":"uint32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"token","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"VERSION","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_networkType","type":"uint32"},{"name":"_virtualChainId","type":"uint64"},{"name":"_orbsASBContractName","type":"string"},{"name":"_token","type":"address"},{"name":"_federation","type":"address"},{"name":"_verifier","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"tuid","type":"uint256"},{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"bytes20"},{"indexed":false,"name":"value","type":"uint256"}],"name":"EthTransferredOut","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"tuid","type":"uint256"},{"indexed":true,"name":"from","type":"bytes20"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"EthTransferredIn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"constant":false,"inputs":[{"name":"_to","type":"bytes20"},{"name":"_value","type":"uint256"}],"name":"transferOut","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_packedProof","type":"bytes"},{"name":"_transactionReceipt","type":"bytes"}],"name":"transferIn","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_verifier","type":"address"}],"name":"setAutonomousSwapProofVerifier","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_networkType","type":"uint32"},{"name":"_virtualChainId","type":"uint64"},{"name":"_orbsASBContractName","type":"string"},{"name":"_token","type":"address"}],"name":"initAutonomousSwapBridge","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]`
const asbByteCode = "0x608060405260006005553480156200001657600080fd5b5060405162002d3538038062002d3583398101806040526200003c91908101906200065b565b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156200016d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001649062000850565b60405180910390fd5b81600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550620001c881620001f1640100000000026401000000009004565b620001e586868686620002cf640100000000026401000000009004565b505050505050620009a5565b6200020a62000489640100000000026401000000009004565b15156200021657600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156200028b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000282906200082e565b60405180910390fd5b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600080835111151562000319576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000310906200080c565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156200038e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620003859062000872565b60405180910390fd5b84600060146101000a81548163ffffffff021916908363ffffffff16021790555083600060186101000a81548167ffffffffffffffff021916908367ffffffffffffffff1602179055508260019080519060200190620003f0929190620004e0565b5081600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600581905550600090505b600654811115156200047a576007600082815260200190815260200160002060006101000a81549060ff02191690558060010190506200043f565b60006006819055505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200052357805160ff191683800117855562000554565b8280016001018555821562000554579182015b828111156200055357825182559160200191906001019062000536565b5b50905062000563919062000567565b5090565b6200058c91905b80821115620005885760008160009055506001016200056e565b5090565b90565b60006200059d82516200090f565b905092915050565b6000620005b3825162000923565b905092915050565b6000620005c9825162000937565b905092915050565b600082601f8301121515620005e557600080fd5b8151620005fc620005f682620008c2565b62000894565b915080825260208301602083018583830111156200061957600080fd5b620006268382846200096f565b50505092915050565b60006200063d82516200094b565b905092915050565b60006200065382516200095b565b905092915050565b60008060008060008060c087890312156200067557600080fd5b60006200068589828a016200062f565b96505060206200069889828a0162000645565b955050604087015167ffffffffffffffff811115620006b657600080fd5b620006c489828a01620005d1565b9450506060620006d789828a01620005a5565b9350506080620006ea89828a01620005bb565b92505060a0620006fd89828a016200058f565b9150509295509295509295565b6000602982527f4f7262732041534220636f6e7472616374206e616d65206d757374206e6f742060208301527f626520656d7074792100000000000000000000000000000000000000000000006040830152606082019050919050565b6000601782527f5665726966696572206d757374206e6f742062652030210000000000000000006020830152604082019050919050565b6000601982527f46656465726174696f6e206d757374206e6f74206265203021000000000000006020830152604082019050919050565b6000601482527f546f6b656e206d757374206e6f742062652030210000000000000000000000006020830152604082019050919050565b6000602082019050818103600083015262000827816200070a565b9050919050565b60006020820190508181036000830152620008498162000767565b9050919050565b600060208201905081810360008301526200086b816200079e565b9050919050565b600060208201905081810360008301526200088d81620007d5565b9050919050565b6000604051905081810181811067ffffffffffffffff82111715620008b857600080fd5b8060405250919050565b600067ffffffffffffffff821115620008da57600080fd5b601f19601f8301169050602081019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091c82620008ef565b9050919050565b60006200093082620008ef565b9050919050565b60006200094482620008ef565b9050919050565b600063ffffffff82169050919050565b600067ffffffffffffffff82169050919050565b60005b838110156200098f57808201518184015260208101905062000972565b838111156200099f576000848401525b50505050565b61238080620009b56000396000f3006080604052600436106100fc576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680632b7ac3f31461010157806333d7fafd1461012c5780633d8b904e146101555780635c45428c14610180578063608f1213146101ab57806366c86119146101d4578063715018a6146101ff5780638da5cb5b146102165780638f32d59b14610241578063923aebf01461026c578063a3302773146102a9578063aebac880146102d2578063bd19dffb146102fb578063e1d5c25514610326578063f2fde38b14610351578063f3762c111461037a578063fc0c546a146103a5578063ffa1ad74146103d0575b600080fd5b34801561010d57600080fd5b506101166103fb565b6040516101239190611e82565b60405180910390f35b34801561013857600080fd5b50610153600480360361014e9190810190611811565b610421565b005b34801561016157600080fd5b5061016a6106ff565b6040516101779190612075565b60405180910390f35b34801561018c57600080fd5b50610195610705565b6040516101a29190611ed3565b60405180910390f35b3480156101b757600080fd5b506101d260048036036101cd919081019061194c565b6107a3565b005b3480156101e057600080fd5b506101e9610953565b6040516101f69190611eb8565b60405180910390f35b34801561020b57600080fd5b50610214610979565b005b34801561022257600080fd5b5061022b610a4b565b6040516102389190611d9a565b60405180910390f35b34801561024d57600080fd5b50610256610a74565b6040516102639190611e15565b60405180910390f35b34801561027857600080fd5b50610293600480360361028e9190810190611923565b610acb565b6040516102a09190611e15565b60405180910390f35b3480156102b557600080fd5b506102d060048036036102cb919081019061184d565b610aeb565b005b3480156102de57600080fd5b506102f960048036036102f491908101906118b9565b611087565b005b34801561030757600080fd5b50610310611150565b60405161031d91906120ab565b60405180910390f35b34801561033257600080fd5b5061033b61116a565b6040516103489190612075565b60405180910390f35b34801561035d57600080fd5b50610378600480360361037391908101906117bf565b611170565b005b34801561038657600080fd5b5061038f61118f565b60405161039c9190612090565b60405180910390f35b3480156103b157600080fd5b506103ba6111a5565b6040516103c79190611e9d565b60405180910390f35b3480156103dc57600080fd5b506103e56111cb565b6040516103f29190612075565b60405180910390f35b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166361cd4172836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016104989190611e30565b602060405180830381600087803b1580156104b257600080fd5b505af11580156104c6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104ea91908101906117e8565b151561052b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161052290611f15565b60405180910390fd5b600081111515610570576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056790611f95565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330846040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016105eb93929190611db5565b602060405180830381600087803b15801561060557600080fd5b505af1158015610619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061063d91908101906117e8565b151561067e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067590611f75565b60405180910390fd5b61069460016005546111d090919063ffffffff16565b600581905550816bffffffffffffffffffffffff19163373ffffffffffffffffffffffffffffffffffffffff166005547ff9a8fa0e73eec86231d6ff8f393ead9e40b7202311ea9a16ff0689cadd51702d846040516106f39190612075565b60405180910390a45050565b60065481565b60018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561079b5780601f106107705761010080835404028352916020019161079b565b820191906000526020600020905b81548152906001019060200180831161077e57829003601f168201915b505050505081565b60008083511115156107ea576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107e190611ef5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561085c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161085390611ff5565b60405180910390fd5b84600060146101000a81548163ffffffff021916908363ffffffff16021790555083600060186101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555082600190805190602001906108bc9291906113d9565b5081600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600581905550600090505b60065481111515610944576007600082815260200190815260200160002060006101000a81549060ff021916905580600101905061090b565b60006006819055505050505050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b610981610a74565b151561098c57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a360008060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b60076020528060005260406000206000915054906101000a900460ff1681565b610af3611459565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166379509d7984846040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610b6c929190611e4b565b600060405180830381600087803b158015610b8657600080fd5b505af1158015610b9a573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f82011682018060405250610bc391908101906118e2565b9050600073ffffffffffffffffffffffffffffffffffffffff16816080015173ffffffffffffffffffffffffffffffffffffffff1614151515610c3b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c3290611fd5565b60405180910390fd5b60008160a00151111515610c84576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c7b90611f95565b60405180910390fd5b806000015163ffffffff16600060149054906101000a900463ffffffff1663ffffffff16141515610cea576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ce190612015565b60405180910390fd5b806020015167ffffffffffffffff16600060189054906101000a900467ffffffffffffffff1667ffffffffffffffff16141515610d5c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d5390611f35565b60405180910390fd5b610e0d816040015160018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610dfa5780601f10610dcf57610100808354040283529160200191610dfa565b820191906000526020600020905b815481529060010190602001808311610ddd57829003601f168201915b50505050506111f190919063ffffffff16565b1515610e4e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e4590612035565b60405180910390fd5b600760008260c00151815260200190815260200160002060009054906101000a900460ff16151515610eb5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610eac90611fb5565b60405180910390fd5b6001600760008360c00151815260200190815260200160002060006101000a81548160ff0219169083151502179055506006548160c001511115610eff578060c001516006819055505b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb82608001518360a001516040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610f80929190611dec565b602060405180830381600087803b158015610f9a57600080fd5b505af1158015610fae573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610fd291908101906117e8565b1515611013576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161100a90612055565b60405180910390fd5b806080015173ffffffffffffffffffffffffffffffffffffffff1681606001516bffffffffffffffffffffffff19168260c001517fffc9b619903b6ea069a03bcccf149c0969d27e0cb01d18f626b8a04350c371a78460a0015160405161107a9190612075565b60405180910390a4505050565b61108f610a74565b151561109a57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561110c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161110390611f55565b60405180910390fd5b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600060189054906101000a900467ffffffffffffffff1681565b60055481565b611178610a74565b151561118357600080fd5b61118c816112df565b50565b600060149054906101000a900463ffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600181565b60008082840190508381101515156111e757600080fd5b8091505092915050565b60008151835114151561120757600090506112d9565b816040518082805190602001908083835b60208310151561123d5780518252602082019150602081019050602083039250611218565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916836040518082805190602001908083835b6020831015156112a4578051825260208201915060208101905060208303925061127f565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019161490505b92915050565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561131b57600080fd5b8073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061141a57805160ff1916838001178555611448565b82800160010185558215611448579182015b8281111561144757825182559160200191906001019061142c565b5b50905061145591906114cc565b5090565b60e060405190810160405280600063ffffffff168152602001600067ffffffffffffffff1681526020016060815260200160006bffffffffffffffffffffffff19168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081525090565b6114ee91905b808211156114ea5760008160009055506001016114d2565b5090565b90565b60006114fd8235612213565b905092915050565b60006115118251612213565b905092915050565b60006115258251612233565b905092915050565b6000611539823561223f565b905092915050565b600061154d825161223f565b905092915050565b600082601f830112151561156857600080fd5b813561157b611576826120f3565b6120c6565b9150808252602083016020830185838301111561159757600080fd5b6115a28382846122f3565b50505092915050565b60006115b7823561226b565b905092915050565b60006115cb823561227d565b905092915050565b600082601f83011215156115e657600080fd5b81516115f96115f48261211f565b6120c6565b9150808252602083016020830185838301111561161557600080fd5b611620838284612302565b50505092915050565b600082601f830112151561163c57600080fd5b813561164f61164a8261214b565b6120c6565b9150808252602083016020830185838301111561166b57600080fd5b6116768382846122f3565b50505092915050565b600060e0828403121561169157600080fd5b61169b60e06120c6565b905060006116ab84828501611783565b60008301525060206116bf848285016117ab565b602083015250604082015167ffffffffffffffff8111156116df57600080fd5b6116eb848285016115d3565b60408301525060606116ff84828501611541565b606083015250608061171384828501611505565b60808301525060a06117278482850161175b565b60a08301525060c061173b8482850161175b565b60c08301525092915050565b6000611753823561228f565b905092915050565b6000611767825161228f565b905092915050565b600061177b8235612299565b905092915050565b600061178f8251612299565b905092915050565b60006117a382356122a9565b905092915050565b60006117b782516122a9565b905092915050565b6000602082840312156117d157600080fd5b60006117df848285016114f1565b91505092915050565b6000602082840312156117fa57600080fd5b600061180884828501611519565b91505092915050565b6000806040838503121561182457600080fd5b60006118328582860161152d565b925050602061184385828601611747565b9150509250929050565b6000806040838503121561186057600080fd5b600083013567ffffffffffffffff81111561187a57600080fd5b61188685828601611555565b925050602083013567ffffffffffffffff8111156118a357600080fd5b6118af85828601611555565b9150509250929050565b6000602082840312156118cb57600080fd5b60006118d9848285016115ab565b91505092915050565b6000602082840312156118f457600080fd5b600082015167ffffffffffffffff81111561190e57600080fd5b61191a8482850161167f565b91505092915050565b60006020828403121561193557600080fd5b600061194384828501611747565b91505092915050565b6000806000806080858703121561196257600080fd5b60006119708782880161176f565b945050602061198187828801611797565b935050604085013567ffffffffffffffff81111561199e57600080fd5b6119aa87828801611629565b92505060606119bb878288016115bf565b91505092959194509250565b6119d08161218d565b82525050565b6119df816121ad565b82525050565b6119ee816121b9565b82525050565b60006119ff82612177565b808452611a13816020860160208601612302565b611a1c81612335565b602085010191505092915050565b611a33816122bd565b82525050565b611a42816122cf565b82525050565b611a51816122e1565b82525050565b6000611a6282612182565b808452611a76816020860160208601612302565b611a7f81612335565b602085010191505092915050565b6000602982527f4f7262732041534220636f6e7472616374206e616d65206d757374206e6f742060208301527f626520656d7074792100000000000000000000000000000000000000000000006040830152606082019050919050565b6000601882527f4f726273206164647265737320697320696e76616c69642100000000000000006020830152604082019050919050565b6000601b82527f496e636f7272656374207669727475616c20636861696e2049442100000000006020830152604082019050919050565b6000601782527f5665726966696572206d757374206e6f742062652030210000000000000000006020830152604082019050919050565b6000601782527f496e73756666696369656e7420616c6c6f77616e6365210000000000000000006020830152604082019050919050565b6000601d82527f56616c7565206d7573742062652067726561746572207468616e2030210000006020830152604082019050919050565b6000601782527f545549442077617320616c7265616479207370656e74210000000000000000006020830152604082019050919050565b6000601f82527f44657374696e6174696f6e20616464726573732063616e2774206265203021006020830152604082019050919050565b6000601482527f546f6b656e206d757374206e6f742062652030210000000000000000000000006020830152604082019050919050565b6000601782527f496e636f7272656374206e6574776f726b2074797065210000000000000000006020830152604082019050919050565b6000602182527f496e636f7272656374204f7262732041534220636f6e7472616374206e616d6560208301527f21000000000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601382527f496e73756666696369656e742066756e647321000000000000000000000000006020830152604082019050919050565b611d76816121e5565b82525050565b611d85816121ef565b82525050565b611d94816121ff565b82525050565b6000602082019050611daf60008301846119c7565b92915050565b6000606082019050611dca60008301866119c7565b611dd760208301856119c7565b611de46040830184611d6d565b949350505050565b6000604082019050611e0160008301856119c7565b611e0e6020830184611d6d565b9392505050565b6000602082019050611e2a60008301846119d6565b92915050565b6000602082019050611e4560008301846119e5565b92915050565b60006040820190508181036000830152611e6581856119f4565b90508181036020830152611e7981846119f4565b90509392505050565b6000602082019050611e976000830184611a2a565b92915050565b6000602082019050611eb26000830184611a39565b92915050565b6000602082019050611ecd6000830184611a48565b92915050565b60006020820190508181036000830152611eed8184611a57565b905092915050565b60006020820190508181036000830152611f0e81611a8d565b9050919050565b60006020820190508181036000830152611f2e81611aea565b9050919050565b60006020820190508181036000830152611f4e81611b21565b9050919050565b60006020820190508181036000830152611f6e81611b58565b9050919050565b60006020820190508181036000830152611f8e81611b8f565b9050919050565b60006020820190508181036000830152611fae81611bc6565b9050919050565b60006020820190508181036000830152611fce81611bfd565b9050919050565b60006020820190508181036000830152611fee81611c34565b9050919050565b6000602082019050818103600083015261200e81611c6b565b9050919050565b6000602082019050818103600083015261202e81611ca2565b9050919050565b6000602082019050818103600083015261204e81611cd9565b9050919050565b6000602082019050818103600083015261206e81611d36565b9050919050565b600060208201905061208a6000830184611d6d565b92915050565b60006020820190506120a56000830184611d7c565b92915050565b60006020820190506120c06000830184611d8b565b92915050565b6000604051905081810181811067ffffffffffffffff821117156120e957600080fd5b8060405250919050565b600067ffffffffffffffff82111561210a57600080fd5b601f19601f8301169050602081019050919050565b600067ffffffffffffffff82111561213657600080fd5b601f19601f8301169050602081019050919050565b600067ffffffffffffffff82111561216257600080fd5b601f19601f8301169050602081019050919050565b600081519050919050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6000819050919050565b600063ffffffff82169050919050565b600067ffffffffffffffff82169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b60006122768261218d565b9050919050565b60006122888261218d565b9050919050565b6000819050919050565b600063ffffffff82169050919050565b600067ffffffffffffffff82169050919050565b60006122c88261218d565b9050919050565b60006122da8261218d565b9050919050565b60006122ec8261218d565b9050919050565b82818337600083830152505050565b60005b83811015612320578082015181840152602081019050612305565b8381111561232f576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a723058203644a80f965bf38a59dbbe711c9023b8be12e6f0bf6c6eb483c0f5d4ca8563fc6c6578706572696d656e74616cf50037"

const asbCryptoABI = `[{"constant":true,"inputs":[],"name":"UNCOMPRESSED_PUBLIC_KEY_SIZE","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_hash","type":"bytes32"},{"name":"_signature","type":"bytes"},{"name":"_address","type":"address"}],"name":"isSignatureValid","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_publicKey","type":"bytes"}],"name":"toAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_proof","type":"bytes32[]"},{"name":"_root","type":"bytes32"},{"name":"_leaf","type":"bytes"}],"name":"isMerkleProofValid","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_proof","type":"bytes32[]"},{"name":"_root","type":"bytes32"},{"name":"_leafHash","type":"bytes32"}],"name":"isMerkleProofValid","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"}]`
const asbCryptoByteCode = `0x61088a610030600b82828239805160001a6073146000811461002057610022565bfe5b5030600052607381538281f3007300000000000000000000000000000000000000003014608060405260043610610084576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680632d8888691461008957806365a18acf146101255780636df6588e146101c75780636f3e954d1461028c578063ab208d2e146102b0575b600080fd5b6100e3600480360381019080803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929050505061033d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6101ad6004803603810190808035600019169060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506103c5565b604051808215151515815260200191505060405180910390f35b610272600480360381019080803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091929192908035600019169060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610485565b604051808215151515815260200191505060405180910390f35b61029461053c565b604051808260ff1660ff16815260200191505060405180910390f35b6103236004803603810190808035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919291929080356000191690602001909291908035600019169060200190929190505050610541565b604051808215151515815260200191505060405180910390f35b6000604060ff16825114151561035657600090506103c0565b816040518082805190602001908083835b60208310151561038c5780518252602082019150602081019050602083039250610367565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206001900490505b919050565b600080600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610406576000915061047d565b6104108585610766565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415801561047a57508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16145b91505b509392505050565b600061053384846002856040518082805190602001908083835b6020831015156104c4578051825260208201915060208101905060208303925061049f565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015610508573d6000803e3d6000fd5b5050506040513d602081101561051d57600080fd5b8101908080519060200190929190505050610541565b90509392505050565b604081565b600080600080849250865191505b600082111561074f57866001830381518110151561056957fe5b90602001906020020151905080600019168360001916101561066557600283826040516020018083600019166000191681526020018260001916600019168152602001925050506040516020818303038152906040526040518082805190602001908083835b6020831015156105f457805182526020820191506020810190506020830392506105cf565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015610638573d6000803e3d6000fd5b5050506040513d602081101561064d57600080fd5b81019080805190602001909291905050509250610741565b600281846040516020018083600019166000191681526020018260001916600019168152602001925050506040516020818303038152906040526040518082805190602001908083835b6020831015156106d457805182526020820191506020810190506020830392506106af565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015610718573d6000803e3d6000fd5b5050506040513d602081101561072d57600080fd5b810190808051906020019092919050505092505b81806001900392505061054f565b856000191683600019161493505050509392505050565b600080600080604185511415156107805760009350610855565b6020850151925060408501519150606085015160001a9050601b8160ff1610156107ab57601b810190505b601b8160ff16141580156107c35750601c8160ff1614155b156107d15760009350610855565b600186828585604051600081526020016040526040518085600019166000191681526020018460ff1660ff1681526020018360001916600019168152602001826000191660001916815260200194505050505060206040516020810390808403906000865af1158015610848573d6000803e3d6000fd5b5050506020604051035193505b505050929150505600a165627a7a72305820d779d92b1061da1a367a8f5f9f0b0dcf658eb5b7473a907027cc6682583cad250029`

const asbVerifyConstructorABI = `[{"constant":true,"inputs":[],"name":"EXECUTION_RESULT_SUCCESS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MAX_SIGNATURES","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"LENGTH_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"COMMIT_MESSAGE_TYPE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ORBS_ADDRESS_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ORBS_TRANSFERRED_OUT_EVENT_NAME","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"SIGNATURE_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BLOCKHASH_OFFSET","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"SHA256_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"WORD_ALIGNED","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"federation","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"UINT32_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ORBS_PROTOCOL_VERSION","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"BLOCKREF_MESSAGE_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"NODE_PK_SIG_NESTING_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"UINT64_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"SIGNATURE_PADDED_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"SENDER_SIGNATURE_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"UINT16_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ADDRESS_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"DWORD_ALIGNED","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"UINT256_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ONEOF_NESTING_SIZE","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"VERSION","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_federation","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]`
const asbIncompleteVerifyByteCode = `0x60806040523480156200001157600080fd5b50604051602080620038f2833981018060405262000033919081019062000105565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515620000a8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200009f9062000168565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050620001be565b6000620000fd8251620001aa565b905092915050565b6000602082840312156200011857600080fd5b60006200012884828501620000ef565b91505092915050565b6000601982527f46656465726174696f6e206d757374206e6f74206265203021000000000000006020830152604082019050919050565b60006020820190508181036000830152620001838162000131565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620001b7826200018a565b9050919050565b61372480620001ce6000396000f30060806040526004361061015e576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806212117d14610163578063037a37961461018e5780630c7d819e146101b95780630fafc6f1146101e457806326413cd01461020f578063287013531461023a578063308ff0c914610265578063397d6e1714610290578063550bed71146102bb5780635bc001a2146102e657806361cd41721461031157806366c861191461034e578063690ba608146103795780636d2c93ac146103a457806379509d79146103cf578063872c7d331461040c5780638d9ecc66146104375780639c3db9a514610462578063a7c53a751461048d578063ace61385146104ca578063ae665562146104f5578063b1b4be8914610520578063c4c3c17e1461054b578063c90b8af614610576578063eea7f0ab146105a1578063f18a25ce146105cc578063ffa1ad74146105f7575b600080fd5b34801561016f57600080fd5b50610178610622565b604051610185919061347c565b60405180910390f35b34801561019a57600080fd5b506101a3610627565b6040516101b0919061347c565b60405180910390f35b3480156101c557600080fd5b506101ce61062c565b6040516101db919061347c565b60405180910390f35b3480156101f057600080fd5b506101f9610631565b604051610206919061347c565b60405180910390f35b34801561021b57600080fd5b50610224610636565b604051610231919061347c565b60405180910390f35b34801561024657600080fd5b5061024f61063b565b60405161025c9190613278565b60405180910390f35b34801561027157600080fd5b5061027a610674565b604051610287919061347c565b60405180910390f35b34801561029c57600080fd5b506102a5610679565b6040516102b2919061347c565b60405180910390f35b3480156102c757600080fd5b506102d061067e565b6040516102dd919061347c565b60405180910390f35b3480156102f257600080fd5b506102fb610683565b604051610308919061347c565b60405180910390f35b34801561031d57600080fd5b5061033860048036036103339190810190612aa8565b610688565b6040516103459190613204565b60405180910390f35b34801561035a57600080fd5b506103636106d2565b604051610370919061325d565b60405180910390f35b34801561038557600080fd5b5061038e6106f7565b60405161039b919061347c565b60405180910390f35b3480156103b057600080fd5b506103b96106fc565b6040516103c6919061347c565b60405180910390f35b3480156103db57600080fd5b506103f660048036036103f19190810190612afa565b610701565b604051610403919061345a565b60405180910390f35b34801561041857600080fd5b50610421610b3d565b60405161042e919061347c565b60405180910390f35b34801561044357600080fd5b5061044c610b42565b604051610459919061347c565b60405180910390f35b34801561046e57600080fd5b50610477610b47565b604051610484919061347c565b60405180910390f35b34801561049957600080fd5b506104b460048036036104af9190810190612b66565b610b4c565b6040516104c1919061345a565b60405180910390f35b3480156104d657600080fd5b506104df610e9a565b6040516104ec919061347c565b60405180910390f35b34801561050157600080fd5b5061050a610e9f565b604051610517919061347c565b60405180910390f35b34801561052c57600080fd5b50610535610ea4565b604051610542919061347c565b60405180910390f35b34801561055757600080fd5b50610560610ea9565b60405161056d919061347c565b60405180910390f35b34801561058257600080fd5b5061058b610eae565b604051610598919061347c565b60405180910390f35b3480156105ad57600080fd5b506105b6610eb3565b6040516105c3919061347c565b60405180910390f35b3480156105d857600080fd5b506105e1610eb8565b6040516105ee919061347c565b60405180910390f35b34801561060357600080fd5b5061060c610ebd565b604051610619919061347c565b60405180910390f35b600181565b606481565b600481565b600381565b601481565b6040805190810160405280601281526020017f4f7262735472616e736665727265644f7574000000000000000000000000000081525081565b604181565b601881565b602081565b600281565b6000806c01000000000000000000000000026bffffffffffffffffffffffff1916826bffffffffffffffffffffffff191614156106c857600090506106cd565b600190505b919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600481565b600181565b61070961273f565b60608060606000606060008061071d6127b2565b610725612805565b61072d612825565b6107368d610ec2565b809a50819b50829c505050506000965061075b6020895161100590919063ffffffff16565b6040519080825280602002602001820160405280156107895781602001602082028038833980820191505090505b509550600094505b6107a66020895161100590919063ffffffff16565b85101561080a576107c0878961102f90919063ffffffff16565b93508386868151811015156107d157fe5b9060200190602002019060001916908160001916815250506107fd60208861105890919063ffffffff16565b9650846001019450610791565b6108138a611079565b92506001836000015163ffffffff16141515610864576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161085b906133fa565b60405180910390fd5b61086e8a8a6111f6565b73__CryptoUtils___________________________636df6588e8785608001518f6040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016108c9939291906131bf565b60206040518083038186803b1580156108e157600080fd5b505af41580156108f5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506109199190810190612a7f565b151561095a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109519061343a565b60405180910390fd5b6109638c611477565b91506001826000015163ffffffff161415156109b4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109ab9061333a565b60405180910390fd5b6109c182602001516115f0565b9050610a0f6040805190810160405280601281526020017f4f7262735472616e736665727265644f75740000000000000000000000000000815250826020015161198f90919063ffffffff16565b1515610a50576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a47906132da565b60405180910390fd5b82604001518b6000019063ffffffff16908163ffffffff168152505082602001518b6020019067ffffffffffffffff16908167ffffffffffffffff168152505080600001518b6040018190525080606001518b606001906bffffffffffffffffffffffff191690816bffffffffffffffffffffffff19168152505080608001518b6080019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508060a001518b60a0018181525050806040015167ffffffffffffffff168b60c00181815250505050505050505050505092915050565b603881565b600481565b600881565b610b5461273f565b610b5c6127b2565b610b64612805565b610b6c612825565b610b7588611079565b92506001836000015163ffffffff16141515610bc6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bbd906133fa565b60405180910390fd5b610bd088886111f6565b73__CryptoUtils___________________________636df6588e868560800151896040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610c2b939291906131bf565b60206040518083038186803b158015610c4357600080fd5b505af4158015610c57573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610c7b9190810190612a7f565b1515610cbc576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cb39061343a565b60405180910390fd5b610cc586611477565b91506001826000015163ffffffff16141515610d16576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d0d9061333a565b60405180910390fd5b610d2382602001516115f0565b9050610d716040805190810160405280601281526020017f4f7262735472616e736665727265644f75740000000000000000000000000000815250826020015161198f90919063ffffffff16565b1515610db2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610da9906132da565b60405180910390fd5b8260400151846000019063ffffffff16908163ffffffff16815250508260200151846020019067ffffffffffffffff16908167ffffffffffffffff168152505080600001518460400181905250806060015184606001906bffffffffffffffffffffffff191690816bffffffffffffffffffffffff1916815250508060800151846080019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508060a001518460a0018181525050806040015167ffffffffffffffff168460c0018181525050505050949350505050565b604481565b606481565b600281565b601481565b600481565b602081565b600c81565b600181565b606080606060008060008060009350610ee48489611a7d90919063ffffffff16565b9250610efa60048561105890919063ffffffff16565b9350610f17848463ffffffff168a611a939092919063ffffffff16565b9650610f328363ffffffff168561105890919063ffffffff16565b9350610f478489611a7d90919063ffffffff16565b9150610f5d60048561105890919063ffffffff16565b9350610f7a848363ffffffff168a611a939092919063ffffffff16565b9550610f958263ffffffff168561105890919063ffffffff16565b9350610faa8489611a7d90919063ffffffff16565b9050610fc060048561105890919063ffffffff16565b9350610fdd848263ffffffff168a611a939092919063ffffffff16565b9450610ff88163ffffffff168561105890919063ffffffff16565b9350505050509193909250565b60008060008311151561101757600080fd5b828481151561102257fe5b0490508091505092915050565b6000806020830184511015151561104557600080fd5b8260208501015190508091505092915050565b600080828401905083811015151561106f57600080fd5b8091505092915050565b6110816127b2565b60008090506110998184611a7d90919063ffffffff16565b826000019063ffffffff16908163ffffffff16815250506110c460048261105890919063ffffffff16565b90506110d98184611a7d90919063ffffffff16565b63ffffffff16826020019067ffffffffffffffff16908167ffffffffffffffff168152505061111260048261105890919063ffffffff16565b905061112860088261105890919063ffffffff16565b905061113e60048261105890919063ffffffff16565b905061115460208261105890919063ffffffff16565b90506111698184611b2090919063ffffffff16565b826060019067ffffffffffffffff16908167ffffffffffffffff168152505061119c60088261105890919063ffffffff16565b90506111b260048261105890919063ffffffff16565b90506111c7818461102f90919063ffffffff16565b826080019060001916908160001916815250506111ee60208261105890919063ffffffff16565b905050919050565b6111fe61288b565b60008061120a84611b36565b92506002856040518082805190602001908083835b602083101515611244578051825260208201915060208101905060208303925061121f565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015611288573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506112ab9190810190612ad1565b915060028360200151836040516020018083600019166000191681526020018260001916600019168152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310151561132057805182526020820191506020810190506020830392506112fb565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015611364573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506113879190810190612ad1565b905082608001516000191681600019161415156113d9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113d0906132ba565b60405180910390fd5b6003836060015161ffff16141515611426576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161141d906133ba565b60405180910390fd5b61142f83611fc3565b1515611470576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114679061339a565b60405180910390fd5b5050505050565b61147f612805565b600080600080925061149b60048461105890919063ffffffff16565b92506114b160208461105890919063ffffffff16565b92506114c683866123bf90919063ffffffff16565b61ffff16846000019063ffffffff16908163ffffffff16815250506114ec8360046123d5565b92506114fa83866004612437565b905050809350506115148386611a7d90919063ffffffff16565b915061152a60048461105890919063ffffffff16565b925061153f8386611a7d90919063ffffffff16565b905061155560048461105890919063ffffffff16565b9250611572838263ffffffff1687611a939092919063ffffffff16565b84602001819052506115938163ffffffff168461105890919063ffffffff16565b92506004810163ffffffff168263ffffffff161415156115e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115df906132fa565b60405180910390fd5b505050919050565b6115f8612825565b6000806000806000809450600093506000925061161785886004612437565b809550819650829750505050611638848489611a939092919063ffffffff16565b866000018190525061164c85886004612437565b80955081965082975050505061166d848489611a939092919063ffffffff16565b866020018190525061168960048661105890919063ffffffff16565b945061169f60048661105890919063ffffffff16565b94506116ad85886002612437565b905050809550506116bf8560046123d5565b94506116d48588611b2090919063ffffffff16565b866040019067ffffffffffffffff16908167ffffffffffffffff168152505061170760088661105890919063ffffffff16565b945061171d60048661105890919063ffffffff16565b945061172b85886002612437565b9050508095505061173d8560046123d5565b94506117528588611a7d90919063ffffffff16565b915060148263ffffffff1614151561179f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117969061335a565b60405180910390fd5b6117b360048661105890919063ffffffff16565b94506117c885886124cf90919063ffffffff16565b86606001906bffffffffffffffffffffffff191690816bffffffffffffffffffffffff19168152505061180560148661105890919063ffffffff16565b945061181b60048661105890919063ffffffff16565b945061182985886002612437565b9050508095505061183b8560046123d5565b94506118508588611a7d90919063ffffffff16565b905060148163ffffffff1614151561189d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118949061337a565b60405180910390fd5b6118b160048661105890919063ffffffff16565b94506118c6858861252e90919063ffffffff16565b866080019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505061191160148661105890919063ffffffff16565b945061192760048661105890919063ffffffff16565b945061193585886002612437565b905050809550506119478560046123d5565b945061195c8588611b2090919063ffffffff16565b67ffffffffffffffff168660a001818152505061198360088661105890919063ffffffff16565b94505050505050919050565b6000815183511415156119a55760009050611a77565b816040518082805190602001908083835b6020831015156119db57805182526020820191506020810190506020830392506119b6565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916836040518082805190602001908083835b602083101515611a425780518252602082019150602081019050602083039250611a1d565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019161490505b92915050565b6000611a8b83836004612566565b905092915050565b606080828401855110151515611aa857600080fd5b821560008114611ac357604051915060208201604052611b14565b6040519150601f8416801560200281840101858101878315602002848b0101015b81831015611b015780518352602083019250602081019050611ae4565b50868552601f19601f8301166040525050505b50809150509392505050565b6000611b2e83836008612566565b905092915050565b611b3e61288b565b600080600080600080600095506000876000019063ffffffff16908163ffffffff1681525050611b778689611a7d90919063ffffffff16565b945060208563ffffffff16141515611bc4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611bbb9061331a565b60405180910390fd5b611bd860048761105890919063ffffffff16565b9550611bed868961102f90919063ffffffff16565b87602001906000191690816000191681525050611c1460208761105890919063ffffffff16565b9550611c2a600c8761105890919063ffffffff16565b95506002611c448760388b611a939092919063ffffffff16565b6040518082805190602001908083835b602083101515611c795780518252602082019150602081019050602083039250611c54565b6001836020036101000a0380198251168184511680821785525050505050509050019150506020604051808303816000865af1158015611cbd573d6000803e3d6000fd5b5050506040513d601f19601f82011682018060405250611ce09190810190612ad1565b87604001906000191690816000191681525050611d0686896123bf90919063ffffffff16565b876060019061ffff16908161ffff1681525050611d2d60188761105890919063ffffffff16565b9550611d42868961102f90919063ffffffff16565b87608001906000191690816000191681525050611d6960208761105890919063ffffffff16565b955060009350611d828689611a7d90919063ffffffff16565b63ffffffff169250611d9e60048761105890919063ffffffff16565b95505b82841015611fb857611dbd60048761105890919063ffffffff16565b9550611dd28689611a7d90919063ffffffff16565b915060148263ffffffff16141515611e1f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e169061341a565b60405180910390fd5b611e3360048761105890919063ffffffff16565b9550611e48868961252e90919063ffffffff16565b8760c001518860a0015160ff16606481101515611e6157fe5b602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050611eac60148761105890919063ffffffff16565b9550611ec18689611a7d90919063ffffffff16565b905060418163ffffffff16141515611f0e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f05906133da565b60405180910390fd5b611f2260048761105890919063ffffffff16565b9550611f3a8660418a611a939092919063ffffffff16565b8760e001518860a0015160ff16606481101515611f5357fe5b6020020181905250611f6f60448761105890919063ffffffff16565b9550611f8c60018860a0015160ff1661105890919063ffffffff16565b8760a0019060ff16908160ff1681525050611fb160648561105890919063ffffffff16565b9350611da1565b505050505050919050565b6000806000606060008060606000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663925f50728b600001516040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161204c9190613497565b602060405180830381600087803b15801561206657600080fd5b505af115801561207a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061209e9190810190612c29565b9750600096508960a0015160ff166040519080825280602002602001820160405280156120da5781602001602082028038833980820191505090505b509550600094505b8960a0015160ff168510156123ad578960c001518560648110151561210357fe5b602002015193508960e001518560648110151561211c57fe5b602002015192506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ddef11608b60000151866040518363ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161219f9291906134b2565b602060405180830381600087803b1580156121b957600080fd5b505af11580156121cd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506121f19190810190612a7f565b15156121fc576123a2565b73__CryptoUtils___________________________6365a18acf8b6040015185876040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016122579392919061321f565b60206040518083038186803b15801561226f57600080fd5b505af4158015612283573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506122a79190810190612a7f565b15156122b2576123a2565b60019150600090505b848110156123225785818151811015156122d157fe5b9060200190602002015173ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614156123175760009150612322565b8060010190506122bb565b81151561232e576123a2565b83868681518110151561233d57fe5b9060200190602002019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505061238d60018861105890919063ffffffff16565b965087871015156123a157600198506123b2565b5b8460010194506120e2565b600098505b5050505050505050919050565b60006123cd83836002612566565b905092915050565b6000806123ec60028561105890919063ffffffff16565b9150612404600184038361105890919063ffffffff16565b9150612419838361259f90919063ffffffff16565b905061242e81836125c490919063ffffffff16565b91505092915050565b6000806000806124508787611a7d90919063ffffffff16565b63ffffffff16915061246c60048861105890919063ffffffff16565b9250612481828461105890919063ffffffff16565b9350612499600186038561105890919063ffffffff16565b93506124ae858561259f90919063ffffffff16565b90506124c381856125c490919063ffffffff16565b93505093509350939050565b6000806014830184511015151561251b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125129061329a565b60405180910390fd5b8260208501015190508091505092915050565b6000806014830184511015151561254457600080fd5b6c01000000000000000000000000836020860101510490508091505092915050565b60006060612587612582858588611a939092919063ffffffff16565b6125e5565b9050612595816000856126e1565b9150509392505050565b60008082141515156125b057600080fd5b81838115156125bb57fe5b06905092915050565b6000808383111515156125d657600080fd5b82840390508091505092915050565b606080600083516040519080825280601f01601f19166020018201604052801561261e5781602001602082028038833980820191505090505b509150600090505b83518110156126d757838181518110151561263d57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f010000000000000000000000000000000000000000000000000000000000000002826001838751030381518110151561269c57fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350806001019050612626565b8192505050919050565b60008082840185511015151561272c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016127239061329a565b60405180910390fd5b8383860101519050809150509392505050565b60e060405190810160405280600063ffffffff168152602001600067ffffffffffffffff1681526020016060815260200160006bffffffffffffffffffffffff19168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081525090565b60a060405190810160405280600063ffffffff168152602001600067ffffffffffffffff168152602001600063ffffffff168152602001600067ffffffffffffffff168152602001600080191681525090565b6040805190810160405280600063ffffffff168152602001606081525090565b60c0604051908101604052806060815260200160608152602001600067ffffffffffffffff16815260200160006bffffffffffffffffffffffff19168152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600081525090565b6119c060405190810160405280600063ffffffff1681526020016000801916815260200160008019168152602001600061ffff16815260200160008019168152602001600060ff1681526020016128e06128f3565b81526020016128ed612917565b81525090565b610c8060405190810160405280606490602082028038833980820191505090505090565b610c80604051908101604052806064905b60608152602001906001900390816129285790505090565b600082601f830112151561295357600080fd5b813561296661296182613508565b6134db565b9150818183526020840193506020810190508385602084028201111561298b57600080fd5b60005b838110156129bb57816129a188826129ed565b84526020840193506020830192505060018101905061298e565b5050505092915050565b60006129d18251613627565b905092915050565b60006129e58235613633565b905092915050565b60006129f9823561365f565b905092915050565b6000612a0d825161365f565b905092915050565b600082601f8301121515612a2857600080fd5b8135612a3b612a3682613530565b6134db565b91508082526020830160208301858383011115612a5757600080fd5b612a62838284613697565b50505092915050565b6000612a778251613669565b905092915050565b600060208284031215612a9157600080fd5b6000612a9f848285016129c5565b91505092915050565b600060208284031215612aba57600080fd5b6000612ac8848285016129d9565b91505092915050565b600060208284031215612ae357600080fd5b6000612af184828501612a01565b91505092915050565b60008060408385031215612b0d57600080fd5b600083013567ffffffffffffffff811115612b2757600080fd5b612b3385828601612a15565b925050602083013567ffffffffffffffff811115612b5057600080fd5b612b5c85828601612a15565b9150509250929050565b60008060008060808587031215612b7c57600080fd5b600085013567ffffffffffffffff811115612b9657600080fd5b612ba287828801612a15565b945050602085013567ffffffffffffffff811115612bbf57600080fd5b612bcb87828801612a15565b935050604085013567ffffffffffffffff811115612be857600080fd5b612bf487828801612a15565b925050606085013567ffffffffffffffff811115612c1157600080fd5b612c1d87828801612940565b91505092959194509250565b600060208284031215612c3b57600080fd5b6000612c4984828501612a6b565b91505092915050565b612c5b81613597565b82525050565b612c6a81613597565b82525050565b6000612c7b82613569565b808452602084019350612c8d8361355c565b60005b82811015612cbf57612ca3868351612ce9565b612cac8261358a565b9150602086019550600181019050612c90565b50849250505092915050565b612cd4816135b7565b82525050565b612ce3816135c3565b82525050565b612cf2816135ef565b82525050565b6000612d0382613574565b808452612d178160208601602086016136a6565b612d20816136d9565b602085010191505092915050565b612d3781613673565b82525050565b6000612d488261357f565b808452612d5c8160208601602086016136a6565b612d65816136d9565b602085010191505092915050565b6000600f82527f496e76616c6964206c656e6774682100000000000000000000000000000000006020830152604082019050919050565b6000601982527f426c6f636b206861736820646f65736e2774206d6174636821000000000000006020830152604082019050919050565b6000601582527f496e636f7272656374206576656e74206e616d652100000000000000000000006020830152604082019050919050565b6000603382527f4d756c7469706c65204576656e7473202d206f6e6c7920612073696e676c652060208301527f6576656e7420697320737570706f7274656421000000000000000000000000006040830152606082019050919050565b6000601282527f496e76616c696420686173682073697a652100000000000000000000000000006020830152604082019050919050565b6000601982527f496e76616c696420657865637574696f6e20726573756c7421000000000000006020830152604082019050919050565b6000601a82527f496e76616c6964204f72627320616464726573732073697a65210000000000006020830152604082019050919050565b6000601e82527f496e76616c696420457468657265756d20616464726573732073697a652100006020830152604082019050919050565b6000601282527f496e76616c6964207369676e61747572652100000000000000000000000000006020830152604082019050919050565b6000603082527f696e76616c696420426c6f636b50726f6f662c2048656c6978206d657373616760208301527f65207479706520213d20434f4d4d4954000000000000000000000000000000006040830152606082019050919050565b6000601782527f496e76616c6964207369676e61747572652073697a65210000000000000000006020830152604082019050919050565b6000601d82527f556e737570706f727465642070726f746f636f6c2076657273696f6e210000006020830152604082019050919050565b6000601582527f496e76616c696420616464726573732073697a652100000000000000000000006020830152604082019050919050565b6000602282527f496e76616c6964207472616e73616374696f6e20726563656970742070726f6f60208301527f66210000000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b600060e0830160008301516130ff60008601826131a1565b50602083015161311260208601826131b0565b506040830151848203604086015261312a8282612d3d565b915050606083015161313f6060860182612cda565b5060808301516131526080860182612c52565b5060a083015161316560a0860182613183565b5060c083015161317860c0860182613183565b508091505092915050565b61318c816135f9565b82525050565b61319b81613685565b82525050565b6131aa81613603565b82525050565b6131b981613613565b82525050565b600060608201905081810360008301526131d98186612c70565b90506131e86020830185612ce9565b81810360408301526131fa8184612cf8565b9050949350505050565b60006020820190506132196000830184612ccb565b92915050565b60006060820190506132346000830186612ce9565b81810360208301526132468185612cf8565b90506132556040830184612c61565b949350505050565b60006020820190506132726000830184612d2e565b92915050565b600060208201905081810360008301526132928184612d3d565b905092915050565b600060208201905081810360008301526132b381612d73565b9050919050565b600060208201905081810360008301526132d381612daa565b9050919050565b600060208201905081810360008301526132f381612de1565b9050919050565b6000602082019050818103600083015261331381612e18565b9050919050565b6000602082019050818103600083015261333381612e75565b9050919050565b6000602082019050818103600083015261335381612eac565b9050919050565b6000602082019050818103600083015261337381612ee3565b9050919050565b6000602082019050818103600083015261339381612f1a565b9050919050565b600060208201905081810360008301526133b381612f51565b9050919050565b600060208201905081810360008301526133d381612f88565b9050919050565b600060208201905081810360008301526133f381612fe5565b9050919050565b600060208201905081810360008301526134138161301c565b9050919050565b6000602082019050818103600083015261343381613053565b9050919050565b600060208201905081810360008301526134538161308a565b9050919050565b6000602082019050818103600083015261347481846130e7565b905092915050565b60006020820190506134916000830184613183565b92915050565b60006020820190506134ac6000830184613192565b92915050565b60006040820190506134c76000830185613192565b6134d46020830184612c52565b9392505050565b6000604051905081810181811067ffffffffffffffff821117156134fe57600080fd5b8060405250919050565b600067ffffffffffffffff82111561351f57600080fd5b602082029050602081019050919050565b600067ffffffffffffffff82111561354757600080fd5b601f19601f8301169050602081019050919050565b6000602082019050919050565b600081519050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6000819050919050565b6000819050919050565b600063ffffffff82169050919050565b600067ffffffffffffffff82169050919050565b60008115159050919050565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6000819050919050565b6000819050919050565b600061367e82613597565b9050919050565b600061369082613603565b9050919050565b82818337600083830152505050565b60005b838110156136c45780820151818401526020810190506136a9565b838111156136d3576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a7230582064692f727da10749b4fd69d9ee5cf9bf48dcebac0cf37c56996f4334d66c4cd76c6578706572696d656e74616cf50037`
